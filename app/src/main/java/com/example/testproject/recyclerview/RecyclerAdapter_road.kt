package com.example.testproject.recyclerview

import android.content.ClipData
import android.content.ClipboardManager
import android.content.Context
import android.content.Context.CLIPBOARD_SERVICE
import android.view.LayoutInflater
import android.view.ViewGroup
import android.widget.Toast
import androidx.core.content.ContextCompat.getSystemService
import androidx.recyclerview.widget.RecyclerView
import com.example.testproject.R
import kotlinx.android.synthetic.main.adress_list.view.*
import kotlinx.android.synthetic.main.item_list.view.*


class RecyclerAdapter_road(val items: ArrayList<recyclerData_road>) :
    RecyclerView.Adapter<RecyclerAdapter_road.RecyclerviewHolder>() {
    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int) = RecyclerviewHolder(parent)

    override fun onBindViewHolder(holder: RecyclerviewHolder, position: Int) {
        items[position].let { item ->
            with(holder) {
                zipNo.text = item.zipNo
                lnmAdres.text = item.lnmAdres
                rnAdres.text = item.rnAdres
                // Creates a new text clip to put on the clipboard

                holder.zipNo.setOnClickListener {

                    val clipboardManager: ClipboardManager = it.context.getSystemService(CLIPBOARD_SERVICE) as ClipboardManager
                    val clipData: ClipData = ClipData.newPlainText("zipNo", zipNo.text.toString())
                    clipboardManager.setPrimaryClip(clipData)
                    Toast.makeText(it.context, "복사했습니다", Toast.LENGTH_SHORT).show()
                }
                holder.lnmAdres.setOnClickListener {
                    val clipboardManager: ClipboardManager = it.context.getSystemService(CLIPBOARD_SERVICE) as ClipboardManager
                    val clipData: ClipData = ClipData.newPlainText("lnmAdres", lnmAdres.text.toString())
                    clipboardManager.setPrimaryClip(clipData)
                    Toast.makeText(it.context, "복사했습니다", Toast.LENGTH_SHORT).show()
                }
                holder.rnAdres.setOnClickListener {
                    val clipboardManager: ClipboardManager = it.context.getSystemService(CLIPBOARD_SERVICE) as ClipboardManager
                    val clipData: ClipData = ClipData.newPlainText("rnAdres", rnAdres.text.toString())
                    clipboardManager.setPrimaryClip(clipData)
                    Toast.makeText(it.context, "복사했습니다", Toast.LENGTH_SHORT).show()
                }



            }
        }
    }


    override fun getItemCount(): Int = items.size

    inner class RecyclerviewHolder(parent: ViewGroup) : RecyclerView.ViewHolder(
        LayoutInflater.from(parent.context).inflate(R.layout.adress_list, parent, false)
    ) {
        val zipNo = itemView.zipNo_textview
        val lnmAdres = itemView.lnmAdres_textview
        val rnAdres = itemView.rnAdres_textview
    }
}